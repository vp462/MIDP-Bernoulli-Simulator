<html lang="eng-US">
  <head>
    <meta
      content="HTML5 simulation of Bernoullis equation"
      name="description"
    />
    <title>BernoullisEquationSim</title>
    <meta content="fluids Bernoullis equation flow physics" name="keywords" />
    <meta content="Martin Kirby" name="author" />
    <meta content="index, follow" name="robots" />
    <meta content="1 month" name="revisit-after" />
    <meta content="text/html; charset=utf-8" http-equiv="content-type" />
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" />
    <meta content="yes" name="apple-mobile-web-app-capable" />
    <meta
      content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no"
      name="viewport"
      id="extViewportMeta"
    />
    <meta content="yes" name="apple-touch-fullscreen" />
    <meta content="width=400" name="viewport" />

    <style>
      .hide-box {
        display: none;
      }
    </style> 
  </head>
  <body>
    
    <!--<div id="rightSquare"></div>-->
    <div class="theWholeThing">
      <div id="answerMessage"></div>
      <div id="QuestionDisplay"></div>
      <div id="infoBoxConstant">Considerations: <br>- Density ρ is constant <br>- Acceleration due to gravity g is constant <br>- The pipe length is constant <br>- flow rate is constant</div>
      <div id="canvasboxid">
        <canvas
          height="783"
          id="mainCanvas"
          width="783"
          style="z-index: 1; display: inline"
        ></canvas>
      </div>
      <div class="fixed">BernoullisEquationSim</div>
      <div id="infocontainerid" style="display: none">
        <div id="first"></div>
        <div class="grid-container">
          <div class="grid-item" style="color: #000; float: left">
            <br /><br /><br /><br />
            <p>
              &nbsp;&nbsp;&nbsp;&nbsp;An incompressible fluid (a liquid) passes
            </p>
            <p>
              &nbsp;&nbsp;&nbsp;&nbsp;through a pipe of cross-section area A₁
            </p>
            <p>
              &nbsp;&nbsp;&nbsp;&nbsp;with a speed of v₁, height h₁, density ρ,
            </p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;and pressure P₁ ...</p>
            <br /><br />
            <p>&nbsp;&nbsp;&nbsp;&nbsp;...the liquid then passes into a pipe</p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;of cross-section area A₂,with a</p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;speed of v₂, height h₂, density ρ,</p>
            <p>&nbsp;&nbsp;&nbsp;&nbsp;and pressure P₂ ...</p>
            <br /><br />
            <p>&nbsp;&nbsp;&nbsp;There is a simple equation that relates</p>
            <p>&nbsp;&nbsp;&nbsp;the above variables: Bernoulli's equation.</p>
            <br /><br />
          </div>
          <div class="grid-item">
            <br /><br /><br /><p1 style="color: green">Bernoulli's Equation:</p1
            ><br /><br /><br /><br /><br /><br /><p3 style="color: green"
              >&nbsp;&nbsp;&nbsp;P₁ + ρgh₁ + ½ρv₁² = P₂ + ρgh₂ + ½ρv₂²</p3
            ><br /><br /><br /><br /><br /><br /><br /><br /><p1
              style="color: #000"
              >Bernoulli's equation is true if:</p1
            >
            <p style="color: red">
              &nbsp;&nbsp;&nbsp;the fluid has no viscosity.
            </p>
            <p style="color: red">
              &nbsp;&nbsp;&nbsp;there is no turbulence in the fluid.
            </p>
            <p style="color: red">
              &nbsp;&nbsp;&nbsp;the fluid is incompressible.
            </p>
            <br /><br />
            <p style="color: #000">
              To make this simulation easier to use, it allows
            </p>
            <p style="color: #000">
              the fluid to have negative pressure. This is only possible
            </p>
            <p style="color: #000">for some degassed fluids.</p>
            <br /><br />
            <p style="color: #000">
              Bernoulli's equation is derived from the law of conservation
            </p>
            <p style="color: #000">
              of energy. If each of the terms of the equation is multiplied
            </p>
            <p style="color: #000">
              by 'volume', it becomes W₁ + U₁ + K₁ = W₂ + U₂ + K₂
            </p>
            <br /><br />
            <p style="color: #00f">
              "Flow rate" is the volume of fluid passing a point each second:
            </p>
            <p style="color: #00f">
              <b
                >Flow rate = Av
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                A₁v₁ = A₂v₂</b
              >
            </p>
          </div>
        </div>
      </div>
    </div>
    <div
      class="boxforbigcheckboxes"
      id="boxforbigcheckboxesid"
      style="z-index: +1; position: absolute; top: 47%"
    >
      <p>Which to keep constant?</p>
      <label class="container" id="p1id" name="mode" value="p1id"
        >Pressure at 1 <input type="radio" name="radio" checked="" />
        <span class="check"></span></label
      ><p2><br /></p2
      ><label class="container" id="p2id" name="mode" value="p2id"
        >Pressure at 2 <input type="radio" name="radio" />
        <span class="check"></span
      ></label>
    </div>

    <div
      class="smallbuttons"
      id="smallbuttonsid"
      style="z-index: +1000; position: absolute; top: 80%"
      ><buttonblue id="LockAnswer" type="button" style="background: black"
        ><b>Lock Answer?</b></buttonblue
     ></div>
     <div
     class="smallbuttons"
     id="smallbuttonsid"
     style="z-index: +1000; position: absolute; top: 85%"
     ><buttonblue id="NextQuestion" type="button" style="background: black"
       ><b>Next Question</b></buttonblue
    ></div>
    

    <div
      class="smallbuttons"
      id="smallbuttonsid"
      style="z-index: +1; position: absolute; top: 90%"
      ><buttonblue id="toggleEquation" type="button" style="background: red"
        ><b>Show Equation</b></buttonblue
      ><buttonblue id="toggleEquationInfo" type="button" style="background: red"
        ><b>Equation Values</b></buttonblue  
    ></div>
    <div
    class="smallbuttons"
    id="smallbuttonsid"
    style="z-index: +1; position: absolute; top: 95%"
    ><buttonblue id="toggleSliders" type="button" style="background: grey"
      ><b>Sliders</b></buttonblue
    ><buttonblue id="togglePipeInfo" type="button" style="background: grey"
      ><b>Pipe Readings</b></buttonblue
    ><buttonblue id="toggleP2" type="button" style="background: orange"
      ><b>Show P2</b></buttonblue
    ></div>

    <div
    class="smallbuttons"
    id="smallbuttonsid"
    style="z-index: +1; position: absolute; top: 65%"
    ><buttonblue id="toggleAnim" type="button" style="background: green"
    ><b>Show/Hide Animation</b></buttonblue
    ></div>

    <div
      class="smallbuttons"
      id="smallbuttonsid"
      style="z-index: +1; position: absolute; top: 70%"
      ><buttonblue id="resetButton" type="button" style="background: blue"
        ><b>Reset</b></buttonblue
      ><buttonblue id="slowButton" type="button" style="background: green"
        ><b>Slow</b></buttonblue
      ><buttonblue id="stopButton" type="button" style="background: green"
        ><b>Start/Stop</b></buttonblue
      
      ><buttonblue
        id="infoButton"
        type="button"
        style="background: lightgreen; color: magenta"
        ><b>?</b></buttonblue        

      >
    </div>

    <div class="boxforleftsliders" id="boxforleftsliderbox">
      <p style="line-height: 0" id="cvoltext">
        <span style="color: Blue"
          >2.000 m³ <span style="color: Blue"> = segment volume </span></span
        >
      </p>
      <bdo dir="ltr"
        ><span id="cvolsliderValue"></span> <label for="cvolRange"></label
        ><input
          type="range"
          value="0.002"
          class="Positionslider"
          id="cvolRange"
          max="0.034"
          min="0.001"
          step="0.001" /></bdo
      ><br />
      <p style="line-height: 0" id="ratetext">
        <span style="color: Blue"
          >10.00 m³/s <span style="color: Blue"> = Av = flow rate </span></span
        >
      </p>
      <bdo dir="ltr"
        ><span id="ratesliderValue"></span> <label for="rateRange"></label
        ><input
          type="range"
          value="1"
          class="Positionslider"
          id="rateRange"
          max="6"
          min="-6"
          step="0.1" /></bdo
      ><br />
      <p style="line-height: 0" id="densitytext">
        <span style="color: Blue"
          >1000 kg/m³ <span style="color: Blue"> = ρ = density </span></span
        >
      </p>
      <bdo dir="ltr"
        ><span id="densitysliderValue"></span> <label for="densityRange"></label
        ><input
          type="range"
          value="1000"
          class="Positionslider"
          id="densityRange"
          max="3000"
          min="100"
          step="100" /></bdo
      ><br />
      <p style="line-height: 0" id="gravtext">
        <span style="color: Blue"
          >10.0 m/s²
          <span style="color: Blue"> = g = accn due to gravity </span></span
        >
      </p>
      <bdo dir="ltr"
        ><span id="gravsliderValue"></span> <label for="gravRange"></label
        ><input
          type="range"
          value="10"
          class="Positionslider"
          id="gravRange"
          max="40"
          min="0"
          step="0.2" /></bdo
      ><br />
      <p style="line-height: 0" id="p1text">
        <span style="color: Blue"
          >100000 N/m²
          <span style="color: Blue"> = P₁ = pressure at 1</span></span
        >
      </p>
      <bdo dir="ltr"
        ><span id="p1sliderValue"></span> <label for="p1Range"></label
        ><input
          type="range"
          value="0"
          class="Positionslider"
          id="p1Range"
          max="1000000"
          min="0"
          step="100" /></bdo
      ><br />
      <p style="line-height: 0" id="p3text">
        <span style="color: Blue"
          >9954 N/m²
          <span style="color: Blue"> = P₂ = pressure at 2</span></span
        >
      </p>
      <bdo dir="ltr"
        ><span id="p3sliderValue"></span> <label for="p3Range"></label
        ><input
          type="range"
          value="0"
          class="Positionslider"
          id="p3Range"
          max="1000000"
          min="0"
          step="100" /></bdo
      ><br />
    </div>
    <style>
      .image-detail-canvas,
      div.fixed {
        -webkit-user-select: none;
        -moz-user-select: none;
      }
      body,
      html {
        overflow: hidden;
      }
      #mainCanvas,
      div.boxforbigcheckboxes {
        background-color: transparent;
        z-index: +1;
      }
      buttonblue,
      warnbutton {
        color: #fff;
        text-align: center;
        -webkit-transition: 0.1s;
        margin: 2px;
        cursor: pointer;
      }
      body,
      div.boxforleftsliders,
      div.fixed,
      form {
        -webkit-touch-callout: none;
      }
      html {
        font-family: sans-serif;
        margin: 0;
        padding: 0;
      }
      body,
      html {
        touch-action: auto;
        overscroll-behavior-y: none;
        overscroll-behavior-x: none;
      }
      #mainCanvas {
        border: 0 solid red;
        touch-action: auto;
        opacity: 1;
        padding: 0;
        margin: auto;
        display: block;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 10%;
      }

      #QuestionDisplay {
      width: 900px;
      padding: 10px;
      position: fixed;
      top: 94%;
      right: 37%;
      text-align: center;
      font-size: 20px;
      margin: 0 auto;
      z-index: 9999;
      }

      #answerMessage {
      width: 200px;
      padding: 10px;
      position: fixed;
      top: 50%;
      right: 375px;
      text-align: center;
      font-size: 20px;
      margin: 0 auto;
      z-index: 9999;
      }

      .rightAnswer {
          color: green;
          border: 7px solid green;
      }

      .wrongAnswer {
          color: red;
          border: 7px solid red;
      }

      #infoBoxConstant {
      position: fixed;
      top: 200px;
      right: 60px;
      padding: 10px;
      border: 3px solid rgb(255, 0, 0);
      background-color: #f9f9f9;
      }
      
      .image-detail-canvas {
        max-width: 100% !important;
        max-height: 100% !important;
        z-index: -1;
      }
      .grid-container,
      .grid-item:first-child,
      .grid-item:nth-child(2) {
        background-color: #f5fffa;
        left: 5%;
        z-index: +3;
      }
      div.fixed {
        position: fixed;
        color: green;
        font-size: 1.18vw;
        top: 1.5%;
        right: 10%;
        width: 10%;
        border: 0 solid #73ad21;
        -ms-user-select: none;
        user-select: none;
      }
      div.boxforbigcheckboxes,
      div.boxforleftsliders,
      div.smallbuttons {
        -webkit-tap-highlight-color: transparent;
        right: 1%;
      }
      body {
        -webkit-text-size-adjust: none;
        -ms-text-size-adjust: none;
        -moz-text-size-adjust: none;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        -webkit-user-drag: none;
        touch-action: none;
        font-family: Helvetica, Arial, sans-serif;
        margin: 2vmin;
      }
      form,
      warnbutton {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
      }
      buttonblue,
      div.smallbuttons,
      form {
        touch-action: auto;
      }
      :root {
        --form-control-color: green;
      }
      *,
      :after,
      :before {
        box-sizing: border-box;
      }
      p {
        font-size: 1.2vw;
      }
      p1 {
        font-size: 1.4vw;
      }
      p2 {
        font-size: 0.8vw;
      }
      p3 {
        font-size: 2.5vw;
      }
      p4 {
        font-size: 1vw;
      }
      h1 {
        font-size: 2vw;
      }
      form {
        margin: 1vmin;
        position: absolute;
        top: 0.4%;
        right: 5%;
        line-height: 1vmin;
        user-select: none;
      }
      .form-control {
        font-family: system-ui, sans-serif;
        font-size: 1.18vw;
        line-height: 2.1vh;
        display: grid;
        grid-template-columns: 1.5vmin auto;
        grid-template-rows: 2.5vmin auto;
        gap: 0;
        cursor: pointer;
      }
      .form-control + .form-control {
        margin-top: 1%;
        margin-right: 1%;
      }
      #infocontainerid {
        position: relative;
        margin-left: 5%;
        margin-top: 0;
        padding: 0;
        background-color: #f5fffa;
        line-height: 7px;
        opacity: 1;
        z-index: -1;
      }
      .grid-container {
        padding: 0;
        top: 2%;
        width: 75%;
        height: 80%;
        border: 4px solid #000;
        display: grid;
        grid-template-areas: "aaa bbb";
      }
      .container,
      .container input:checked ~ .check:after {
        display: block;
      }
      .check,
      buttonblue {
        background-color: #d3d3d3;
      }
      .grid-item:first-child {
        grid-area: aaa;
      }
      .grid-item:nth-child(2) {
        grid-area: bbb;
      }
      div.boxforbigcheckboxes {
        touch-action: auto;
        margin: 0;
        border: 0 solid red;
        position: absolute;
        font-weight: 700;
        font-size: 1vw;
        line-height: 2.1vh;
        bottom: 14%;
        height: 20%;
        width: 17%;
        display: flex;
        flex-direction: column;
        flex-wrap: wrap;
        cursor: pointer;
      }
      buttonblue:active,
      buttonblue:hover,
      warnbutton:active,
      warnbutton:hover {
        background-color: #006400;
      }
      .container {
        position: relative;
        padding-left: 30px;
        margin-bottom: 0;
        margin-left: 3vw;
        cursor: pointer;
        font-size: 1vw;
      }
      .check,
      .check:after,
      .container input,
      div.smallbuttons {
        position: absolute;
      }
      .container input {
        opacity: 0;
        cursor: pointer;
      }
      .check {
        top: -0.4vw;
        left: -0.4vw;
        height: 2vw;
        width: 2vw;
        border-radius: 50%;
      }
      .container:hover input ~ .check {
        background-color: gray;
      }
      .container input:checked ~ .check,
      warnbutton {
        background-color: green;
      }
      .check:after {
        content: "";
        display: none;
      }
      .container .check:after {
        top: 0.5vw;
        left: 0.5vw;
        width: 1vw;
        height: 1vw;
        border-radius: 50%;
        background: #fff;
      }
      div.smallbuttons {
        margin: 0;
        padding: 0;
        text-align: center;
        display: table-row;
        border: 0 solid #00f;
        width: 22%;
        font-size: 6vmin;
        line-height: 1.18vw;
        flex-direction: row;
        bottom: 10%;
        z-index: 2;
      }
      buttonblue {
        border-radius: 10px;
        border: 0 solid #fff;
        font-size: 2vmin;
        padding: 1vmin;
        width: 29%;
        -moz-transition: 0.1s;
        -o-transition: 0.1s;
        transition: 0.1s;
        box-shadow: 2px 4px #000;
      }
      div.boxforleftsliders,
      warnbutton {
        touch-action: auto;
        font-size: 1.18vw;
      }
      buttonblue:active {
        box-shadow: 0 0 #000;
        transform: translateY(4px);
        z-index: +5;
      }
      warnbutton {
        border-radius: 2%;
        border: 0 solid #fff;
        line-height: 3vh;
        padding: 0.25vmin;
        display: table-cell;
        vertical-align: middle;
        height: 16%;
        width: 30%;
        -moz-transition: 0.1s;
        -o-transition: 0.1s;
        transition: 0.1s;
        box-shadow: 0 4px gray;
        user-select: none;
      }
      warnbutton:active {
        box-shadow: 1px 1px gray;
        transform: translateY(2px);
      }
      div.boxforleftsliders {
        border: 0 solid red;
        position: absolute;
        width: 20%;
        top: 5%;
        font-family: sans-serif, Helvetica, sans-serif;
        font-weight: 700;
        z-index: +1;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      input[type="range"].Positionslider {
        line-height: 10%;
        border: 0 solid #000;
        -webkit-appearance: none;
        height: 4vh;
        width: 100%;
        background-color: #add8e6;
        margin: 0;
        padding-top: 0;
        padding-bottom: 0;
        direction: ltr;
        opacity: 1;
        -webkit-transition: 0.1s;
        transition: none;
        cursor: pointer;
      }
      input[type="range"].Positionslider:hover {
        background-color: #ff0;
        height: 4vh;
        -webkit-appearance: none;
        opacity: 1;
      }
      input[type="range"].Positionslider:disabled {
        height: 2.5vh;
        background-color: #fff;
        -webkit-appearance: none;
        opacity: 0.7;
      }
      input[type="range"].Positionslider::-moz-range-thumb {
        border: 0 solid #000;
        height: 4vh;
        width: 4vh;
        border-radius: 4vh;
        background: #000;
        cursor: pointer;
        -webkit-appearance: none;
        margin-top: 0;
      }
      input[type="range"].Positionslider::-ms-thumb {
        border: 0 solid #000;
        height: 4vh;
        width: 4vh;
        border-radius: 4vh;
        background: #000;
        cursor: pointer;
        -webkit-appearance: none;
        margin-top: 0;
      }
      input[type="range"].Positionslider::-webkit-slider-thumb {
        border: 0 solid #000;
        height: 4vh;
        width: 4vh;
        border-radius: 4vh;
        background: #000;
        cursor: pointer;
        -webkit-appearance: none;
        margin-top: 0;
      }
      input[type="range"].Positionslider::-webkit-slider-runnable-track {
        width: 100%;
        height: 4vh;
        background: #add8e6;
        cursor: pointer;
        opacity: 0.65;
        border-radius: 0;
        -webkit-appearance: none;
        border: 0 solid #fff;
      }
      input[type="range"].Positionslider::-ms-track {
        width: 100%;
        height: 4vh;
        background: #add8e6;
        cursor: pointer;
        opacity: 0.65;
        border-radius: 0;
        -webkit-appearance: none;
        border: 0 solid #fff;
      }
      input[type="range"].Positionslider::-moz-range-track {
        width: 100%;
        height: 4vh;
        background: #add8e6;
        cursor: pointer;
        opacity: 0.65;
        border-radius: 0;
        -webkit-appearance: none;
        border: 0 solid #fff;
      }
      input[type="range"].Positionslider:focus::-webkit-slider-runnable-track {
        width: 100%;
        height: 4vh;
        background: #add8e6;
        cursor: pointer;
        opacity: 0.65;
        border-radius: 0;
        -webkit-appearance: none;
        border: 0 solid #fff;
      }
      input[type="range"].Positionslider:focus::-ms-track {
        width: 100%;
        height: 4vh;
        background: #add8e6;
        cursor: pointer;
        opacity: 0.65;
        border-radius: 0;
        -webkit-appearance: none;
        border: 0 solid #fff;
      }
      input[type="range"].Positionslider:focus::-moz-range-track {
        width: 100%;
        height: 4vh;
        background: #add8e6;
        cursor: pointer;
        opacity: 0.65;
        border-radius: 0;
        -webkit-appearance: none;
        border: 0 solid #fff;
      }
      
    
      #rightSquare {
      position: fixed;
      top: 0;
      left: 50%;
      transform: translateX(70%);
      width: 500px;
      height: 600px;
      background: white;
      z-index: 9999;
      }
      -->
      

    </style>
    <script charset="utf-8"></script>
    <script type="text/javascript">
      let developer = "Martin Kirby. waveaddapp@gmail.com",
        licence = "copyright 2021 Martin Kirby. All rights reserved.",
        canvas1 = document.getElementById("mainCanvas"),
        ctx1 = canvas1.getContext("2d"),
        amousedownongraph = !1,
        bmousedownongraph = !1,
        alastmousedownongraph = !1,
        blastmousedownongraph = !1,
        height1mousedownongraph = !1,
        height3mousedownongraph = !1,
        radius = 0.7,
        stop = false,
        slowmo = !0,
        x = 0,
        y = 0,
        h1 = 0,
        w1 = 0,
        hvertdonate = 0,
        wvertdonate = 0,
        fontSize = 0,
        fontBase = 0,
        headlength = 10,
        showvertdonate = !1,
        xtryMousePos = 0,
        ytryMousePos = 0,
        xtryTouchPos = 0,
        ytryTouchPos = 0,
        mouseIsDown = 0,
        Ypos = 0.45,
        Lradius = 0,
        Rradius = 0,
        slicecolor = "blue",
        cvolslider = document.getElementById("cvolRange"),
        rateslider = document.getElementById("rateRange"),
        densityslider = document.getElementById("densityRange"),
        gravslider = document.getElementById("gravRange"),
        p1slider = document.getElementById("p1Range"),
        p3slider = document.getElementById("p3Range"),
        alphanum = 1,
        flowrate = 1,
        leftgreendangletouched = !1,
        leftorangedangletouched = !1,
        cvol = 0.002,
        xs1 = 0,
        xs2 = 0,
        xs3 = 0,
        xs1total = 0,
        xs2total = 0,
        xs3total = 0,
        xtick1 = 0,
        xtick2 = 0,
        xtick3 = 0,
        tickrate = 0.01,
        pressure1 = 1e5,
        pressure3 = 0,
        deltapressure = 0,
        p1selected = !0,
        p3selected = !1,
        ke1 = 0,
        pe1 = 0,
        ke3 = 0,
        pe3 = 0,
        density = 1e3,
        grav = 10,
        total2frustramvol2 = 0,
        total2frustramvol = 0,
        xincrement13 = 0,
        yincrement13 = 0,
        y2 = 0,
        pop1 = 0,
        go1 = !0,
        go2 = !1,
        go3 = !1,
        x1p = 0.3,
        y1p = 0.1,
        x2p = 0.7,
        y2p = 0.1,
        x3p = 1.1,
        y3p = 0.1,
        axpos = x1p * w1,
        aypos = (Ypos + y1p) * w1,
        bxpos = x2p * w1,
        bypos = (Ypos + y2p) * w1,
        cxpos = x3p * w1,
        cypos = (Ypos + y3p) * w1,
        height1x = (x1p / 2) * w1,
        height1y = Ypos * w1,
        height3x = ((x3p + 1) / 2) * w1,
        height3y = Ypos * w1,
        screenheight1 = 10 * (1 - height1y / h1),
        screenheight3 = 10 * (1 - height3y / h1),
        speed1 = (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p),
        speed3 = (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p),
        deltah1 = 0.2,
        deltah3 = -0.1,
        showradius = !0,
        showarea = !0,
        showspeed = !0,
        showpressure = !0,
        showheight = !0,
        showwidth = !0,
        showinfo = !1;

        
        var showPressure2 = true;
        document.getElementById('toggleP2').addEventListener('click', function() {
          showPressure2 = !showPressure2;
          toggleP2Slider();
        });

        function toggleP2Slider() {
          var p3slider = document.getElementById('p3Range');
          if (!showPressure2) {
            p3slider.classList.add('hide-box');
          } else {
            p3slider.classList.remove('hide-box');
          }
        }

        toggleP2Slider();

        var showAnim = true;
        document.getElementById('toggleAnim').addEventListener('click', function() {
          showAnim = !showAnim;
        });

        var showVariables = true;
        document.getElementById('togglePipeInfo').addEventListener('click', function() {
          showVariables = !showVariables;
          toggleBoxVisibility(); // Apply changes to the box visibility
        });

        var showSliders = false;
        document.getElementById('toggleSliders').addEventListener('click', function() {
          showSliders = !showSliders;
          toggleBoxVisibility(); // Apply changes to the box visibility
        });

        function toggleBoxVisibility() {
          var box = document.getElementById('boxforleftsliderbox');
          var infoBoxConstant = document.getElementById('infoBoxConstant');
          if (!showSliders) {
            box.classList.add('hide-box'); // Add the hide-box class
            infoBoxConstant.classList.remove('hide-box');
          } else {
            box.classList.remove('hide-box'); // Remove the hide-box class
            infoBoxConstant.classList.add('hide-box');
          }
        }

        toggleBoxVisibility();


        var showEquation = true;
        document.getElementById('toggleEquation').addEventListener('click', function() {
          showEquation = !showEquation;
        });

        var showEquationInfo = true;
        document.getElementById('toggleEquationInfo').addEventListener('click', function() {
          showEquationInfo = !showEquationInfo;
        });

        var clickCountLock = 0;

        document.getElementById('LockAnswer').addEventListener('click', function() {
            var answerMessage = document.getElementById('answerMessage');
            clickCountLock++;
            if (clickCountLock % 3 === 0) {
                answerMessage.innerHTML = '<u>Correct answer:</u><br><br> Well done!<br> Next challenge unlocked!<br><br> (Feel free to explore)' ;
                answerMessage.className = 'rightAnswer';
            } else if (clickCountLock % 3 === 1) {
                answerMessage.innerHTML = '<u>Wrong answer:</u><br><br> Try again!';
                answerMessage.className = 'wrongAnswer';
            } else {
                answerMessage.innerHTML = '<u>Wrong answer:</u><br><br> Try again, you can select one button to show hidden information';
                answerMessage.className = 'wrongAnswer';
            }
        });

        var clickCountAnswer = 0;
        document.getElementById('NextQuestion').addEventListener('click', function() {
            var QuestionDisplay = document.getElementById('QuestionDisplay');
            clickCountAnswer++;
            if (clickCountAnswer % 7 === 1) {
              QuestionDisplay.innerHTML = '<strong>Level 1</strong> - Challenge 1: Obtain the <u>highest</u> pressure at 2 by modifying <u>radius1</u>';
            } else if (clickCountAnswer % 7 === 2) {
              QuestionDisplay.innerHTML = '<strong>Level 1</strong> - Challenge 2: Obtain the <u>highest</u> pressure at 2 by modifying <u>radius2</u>';
            } else if (clickCountAnswer % 7 === 3) {
              QuestionDisplay.innerHTML = '<strong>Level 1</strong> - Challenge 3: Obtain the <u>highest</u> pressure at 2 by modifying <u>both radii</u>';
            } else if (clickCountAnswer % 7 === 4) {
              QuestionDisplay.innerHTML = '<strong>Level 1</strong> - Challenge 4: Obtain the <u>lowest</u> pressure at 2 by modifying <u>both radii</u>';
            } else if (clickCountAnswer % 7 === 5) {
              QuestionDisplay.innerHTML = '<strong>Level 3</strong> - Challenge 1: Obtain the <u>highest</u> pressure at 2 by modifying <u>all</u> heights and radii';  
            } else if (clickCountAnswer % 7 === 6) {
                QuestionDisplay.innerHTML = '<strong>Level 3</strong> - Challenge 2: Obtain the <u>lowest</u> pressure at 2 by modifying <u>all</u> heights and radii';
              } else {
                QuestionDisplay.innerHTML = '<strong>Level 3</strong> - Challenge 3: Obtain the <u>highest</u> pressure at 2 by modifying <u>all</u> heights and radii';
            }
        });

      function initialvaluesgreen() {
        (xs1 = cvol / (Math.PI * y1p * y1p)),
          (xs3 = cvol / (Math.PI * y3p * y3p)),
          (go1 = !0),
          (go2 = !1),
          (go3 = !1),
          (leftgreendangletouched = !0);
      }
      function initialvaluesorange() {
        leftorangedangletouched = !0;
      }
      function showainfoclicked() {
        !0 == (showinfo = !showinfo) &&
          ((document.getElementById("infocontainerid").style.zIndex = "+6"),
          (document.getElementById("mainCanvas").style.zIndex = "-1"),
          (document.getElementById("mainCanvas").style.display = "none")),
          !1 == showinfo &&
            ((document.getElementById("infocontainerid").style.zIndex = "-1"),
            (document.getElementById("mainCanvas").style.zIndex = "+1"),
            (document.getElementById("mainCanvas").style.display = "inline"));
      }
      function getFont() {
        let e = fontSize / fontBase;
        return (0 | (canvas1.width * e)) + "px sans-serif";
      }


      function htmltextchange() {
          (document.getElementById("cvoltext").innerHTML =
        "<span style='color:Blue;'     >" +
        toDecimalPrecision(1e3 * cvol, 4) +
        " m\xb3    <span style='color:     Blue;'> = segment volume </span>"),
        (document.getElementById("ratetext").innerHTML =
          "<span style='color:Blue;'     >" +
          toDecimalPrecision(10 * flowrate, 4) +
          " m\xb3/s  <span style='color:     Blue;'> = Av = flow rate </span>"),
        (document.getElementById("densitytext").innerHTML =
          "<span style='color:Blue;'     >" +
          toDecimalPrecision(density, 4) +
          " kg/m\xb3 <span style='color:     Blue;'> = ρ = density </span>"),
        (document.getElementById("gravtext").innerHTML =
          "<span style='color:Blue;'     >" +
          grav.toFixed(1) +
          " m/s\xb2  <span style='color:     Blue;'> = g = accn due to gravity </span>"),
        (document.getElementById("p1text").innerHTML =
          "<span style='color:Blue;'     >" +
          toDecimalPrecision(pressure1, 4) +
          " N/m\xb2 <span style='color:     Blue;'> = P₁ = pressure at 1</span>"),
        (document.getElementById("p3text").innerHTML =
          "<span style='color:" + (showPressure2 ? "blue" : "white") + ";'>" +
          toDecimalPrecision(pressure3, 4) +
          " N/m\xb2 <span style='color: " + (showPressure2 ? "blue" : "white") + ";'> = P₂ = pressure at 2</span>"),
        (fontBase = 800),
        (fontSize = 25),
        (ctx1.font = getFont()),
        (ctx1.textAlign = "center"),
        (ctx1.textBaseline = "bottom"),
        (ctx1.fillStyle = "darkblue");
        }
    
      function toDecimalPrecision(e, t) {
        return (
          (e = (+e).toPrecision(t)).indexOf("e") >= 0 && (e = (+e).toString()),
          e
        );
      }
      function drawArrow(e, t, o, s, l, a, h) {
        ctx1.setLineDash([]);
        let n = Math.sqrt(Math.pow(t - s, 2) + Math.pow(o - l, 2));
        n <= (headlength = 0.02 * w1) && ((headlength = n), (a = 0.2 * n));
        let p = Math.atan2(l - o, s - t);
        e.save(),
          (e.strokeStyle = h),
          (e.fillStyle = h),
          e.beginPath(),
          e.moveTo(t, o),
          e.lineTo(s, l),
          (e.lineWidth = a),
          e.stroke(),
          e.beginPath(),
          e.moveTo(s, l),
          e.lineTo(
            s - headlength * Math.cos(p - Math.PI / 7),
            l - headlength * Math.sin(p - Math.PI / 7)
          ),
          e.lineTo(
            s - headlength * Math.cos(p + Math.PI / 7),
            l - headlength * Math.sin(p + Math.PI / 7)
          ),
          e.lineTo(s, l),
          e.lineTo(
            s - headlength * Math.cos(p - Math.PI / 7),
            l - headlength * Math.sin(p - Math.PI / 7)
          ),
          e.stroke(),
          e.fill(),
          e.restore();
      }
      document.body.addEventListener("mouseup", mouseUp, !1),
        document.body.addEventListener("touchcancel", touchUp, !1),
        (document.getElementById("infocontainerid").style.display = "none"),
        (cvolslider.oninput = function () {
          (cvol = Number(cvolslider.value).valueOf()), htmltextchange();
        }),
        (rateslider.oninput = function () {
          (flowrate = Number(rateslider.value).valueOf()),
            calcdeltapressure(),
            htmltextchange();
        }),
        (densityslider.oninput = function () {
          (density = Number(densityslider.value).valueOf()),
            calcdeltapressure(),
            htmltextchange();
        }),
        (gravslider.oninput = function () {
          (grav = Number(gravslider.value).valueOf()),
            calcdeltapressure(),
            htmltextchange();
        }),
        (p1slider.oninput = function () {
          (pressure1 = Number(p1slider.value).valueOf()),
            calcdeltapressure(),
            (pressure3 = pressure1 + deltapressure),
            (document.getElementById("p3Range").value = pressure3),
            htmltextchange();
        }),
        (p3slider.oninput = function () {
          (pressure3 = Number(p3slider.value).valueOf()),
            calcdeltapressure(),
            (pressure1 = pressure3 - deltapressure),
            (document.getElementById("p1Range").value = pressure1),
            htmltextchange();
        });
      var LightenColor = function (e, t) {
        var o = parseInt(e, 16),
          s = Math.round(2.55 * t),
          l = (o >> 16) + s,
          a = ((o >> 8) & 255) + s,
          h = (255 & o) + s;
        return (
          16777216 +
          (l < 255 ? (l < 1 ? 0 : l) : 255) * 65536 +
          (a < 255 ? (a < 1 ? 0 : a) : 255) * 256 +
          (h < 255 ? (h < 1 ? 0 : h) : 255)
        )
          .toString(16)
          .slice(1);
      };
      function mouseUp() {
        (mouseIsDown = 0), mouseXY();
      }
      function mouseDown() {
        (mouseIsDown = 1), mouseXY();
      }
      function mouseXY(e) {
        if (!e) var e = event;
        (xtryMousePos = e.pageX - canvas1.offsetLeft),
          (ytryMousePos = e.pageY - canvas1.offsetTop),
          1 == mouseIsDown && (whereismouse(), ismouseoncircle());
      }
      function touchUp() {
        mouseIsDown = 0;
      }
      function touchDown() {
        (mouseIsDown = 1), touchXY();
      }
      function touchXY(e) {
        if (!e) var e = event;
        e.preventDefault(),
          (xtryMousePos = e.targetTouches[0].pageX - canvas1.offsetLeft),
          (ytryMousePos = e.targetTouches[0].pageY - canvas1.offsetTop),
          1 == mouseIsDown && (whereismouse(), ismouseoncircle());
      }
      function whereismouse() {
        xtryMousePos > axpos - 0.04 * w1 &&
          xtryMousePos < x1p * w1 + 0.04 * w1 &&
          ytryMousePos > aypos + deltah1 * w1 - 0.04 * w1 &&
          ytryMousePos < aypos + deltah1 * w1 + 0.04 * w1 &&
          ((amousedownongraph = !0),
          (bmousedownongraph = !1),
          (height1mousedownongraph = !1),
          (height3mousedownongraph = !1)),
          xtryMousePos > bxpos - 0.04 * w1 &&
            xtryMousePos < bxpos + 0.04 * w1 &&
            ytryMousePos > bypos + deltah3 * w1 - 0.04 * w1 &&
            ytryMousePos < bypos + deltah3 * w1 + 0.04 * w1 &&
            ((amousedownongraph = !1),
            (bmousedownongraph = !0),
            (height1mousedownongraph = !1),
            (height3mousedownongraph = !1)),
          xtryMousePos > height1x - 0.04 * w1 &&
            xtryMousePos < height1x + 0.04 * w1 &&
            ytryMousePos > height1y - 0.04 * w1 &&
            ytryMousePos < height1y + 0.04 * w1 &&
            ((amousedownongraph = !1),
            (bmousedownongraph = !1),
            (height1mousedownongraph = !0),
            (height3mousedownongraph = !1)),
          xtryMousePos > height3x - 0.04 * w1 &&
            xtryMousePos < height3x + 0.04 * w1 &&
            ytryMousePos > height3y - 0.04 * w1 &&
            ytryMousePos < height3y + 0.04 * w1 &&
            ((amousedownongraph = !1),
            (bmousedownongraph = !1),
            (height1mousedownongraph = !1),
            (height3mousedownongraph = !0)),
          xtryTouchPos > axpos - 0.04 * w1 &&
            xtryTouchPos < x1p * w1 + 0.04 * w1 &&
            ytryTouchPos > aypos + deltah1 * w1 - 0.04 * w1 &&
            ytryTouchPos < aypos + deltah1 * w1 + 0.04 * w1 &&
            ((amousedownongraph = !0),
            (bmousedownongraph = !1),
            (height1mousedownongraph = !1),
            (height3mousedownongraph = !1)),
          xtryTouchPos > bxpos - 0.04 * w1 &&
            xtryTouchPos < bxpos + 0.04 * w1 &&
            ytryTouchPos > bypos + deltah3 * w1 - 0.04 * w1 &&
            ytryTouchPos < bypos + deltah3 * w1 + 0.04 * w1 &&
            ((amousedownongraph = !1),
            (bmousedownongraph = !0),
            (height1mousedownongraph = !1),
            (height3mousedownongraph = !1)),
          xtryTouchPos > height1x - 0.04 * w1 + w1 / 80 &&
            xtryTouchPos < height1x + 0.04 * w1 + w1 / 80 &&
            ytryTouchPos > height1y - 0.04 * w1 + w1 / 80 + 0.04 * h1 &&
            ytryTouchPos < height1y + 0.04 * w1 + w1 / 80 + 0.04 * h1 &&
            ((amousedownongraph = !1),
            (bmousedownongraph = !1),
            (height1mousedownongraph = !0),
            (height3mousedownongraph = !1)),
          xtryTouchPos > height3x - 0.04 * w1 + w1 / 80 &&
            xtryTouchPos < height3x + 0.04 * w1 + w1 / 80 &&
            ytryTouchPos > height3y - 0.04 * w1 + w1 / 80 + 0.04 * h1 &&
            ytryTouchPos < height3y + 0.04 * w1 + w1 / 80 + 0.04 * h1 &&
            ((amousedownongraph = !1),
            (bmousedownongraph = !1),
            (height1mousedownongraph = !1),
            (height3mousedownongraph = !0));
      }
      function ismouseoncircle() {
        !0 == amousedownongraph &&
          (xtryMousePos < bxpos && (axpos = xtryMousePos),
          ytryMousePos > (Ypos + deltah1 + 0.04) * w1 &&
            ytryMousePos < 0.9 * h1 &&
            (aypos = ytryMousePos - deltah1 * w1),
          (x1p = axpos / w1),
          (y1p = aypos / w1 - Ypos),
          (height1x = (x1p * h1) / 2),
          calcdeltapressure(),
          initialvaluesgreen()),
          !0 == bmousedownongraph &&
            (xtryMousePos > axpos &&
              xtryMousePos < cxpos &&
              (bxpos = xtryMousePos),
            ytryMousePos > (Ypos + deltah3 + 0.04) * w1 &&
              ytryMousePos < 0.9 * h1 &&
              (cypos = bypos = ytryMousePos - deltah3 * w1),
            (x2p = bxpos / w1),
            (y3p = y2p = bypos / w1 - Ypos),
            (height3x = ((x2p + 1) * h1) / 2),
            calcdeltapressure(),
            initialvaluesgreen()),
          !0 == height1mousedownongraph &&
            ((deltah1 = (height1y = ytryMousePos) / w1 - Ypos),
            initialvaluesorange(),
            calcdeltapressure()),
          !0 == height3mousedownongraph &&
            ((deltah3 = (height3y = ytryMousePos) / w1 - Ypos),
            calcdeltapressure(),
            initialvaluesorange());
      }
      function p1clicked() {
        (p1selected = !0), (p3selected = !1);
      }
      function p2clicked() {
        (p1selected = !1), (p3selected = !0);
      }
      function calcdeltapressure() {
        (screenheight1 = 10 * (1 - height1y / h1)),
          (screenheight3 = 10 * (1 - height3y / h1)),
          (speed1 = (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p)),
          (speed3 = (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p)),
          (ke1 = 0.5 * density * speed1 * speed1),
          (pe1 = density * grav * screenheight1),
          (ke3 = 0.5 * density * speed3 * speed3),
          (deltapressure =
            -((pe3 = density * grav * screenheight3) + ke3) + (pe1 + ke1)),
          !0 == p1selected &&
            ((document.getElementById("p1Range").value = pressure1),
            (pressure3 = pressure1 + deltapressure),
            (document.getElementById("p3Range").value = pressure3)),
          !0 == p3selected &&
            ((document.getElementById("p3Range").value = pressure3),
            (pressure1 = pressure3 - deltapressure),
            (document.getElementById("p1Range").value = pressure1)),
          htmltextchange();
      }
      function firstchunk() {
        if (
          ((alphanum = density / 3e3),
          !1 == leftgreendangletouched &&
            !1 == leftorangedangletouched &&
            1 == flowrate &&
            0.01 == cvol &&
            !1 == stop &&
            !1 == slowmo &&
            (document.getElementById("resetButton").style.background = "gray"),
          (!0 == leftgreendangletouched ||
            !0 == leftorangedangletouched ||
            1 != flowrate ||
            0.01 != cvol ||
            !0 == stop ||
            !0 == slowmo) &&
            (document.getElementById("resetButton").style.background = "blue"),
          !0 == go1)
        ) {
          if (
            ((go2 = !1),
            (go3 = !1),
            (fontBase = 800),
            (fontSize = 25),
            (ctx1.font = getFont()),
            (ctx1.fillStyle = "black"),
            !0 == slowmo && (tickrate = (1e-5 * flowrate) / cvol),
            !0 == stop && (tickrate = 0),
            !1 == stop && !1 == slowmo && (tickrate = (1e-4 * flowrate) / cvol),
            xtick1 >= xs1 && (xtick1 = 0),
            (xtick1 += xs1 * tickrate),
            (xtick2 =
              (cvol - (x1p % xs1) / xs1) * cvol + (xtick1 / xs1) * cvol),
            (xtick3 =
              (cvol -
                ((total2frustramvol =
                  (Math.PI * (x2p - x1p) * (y1p ** 2 + y1p * y2p + y2p ** 2)) /
                  3) -
                  (total2frustramvol2 =
                    (Math.PI *
                      xs2total *
                      (y1p ** 2 + y1p * pop1 + pop1 * pop1)) /
                    3)) /
                  cvol) *
              xs3),
            <!--change color of circle line here-->
            (ctx1.strokeStyle = "red"),
            (xs1total = -xs1),
            y1p > Math.sqrt(cvol / (x1p * Math.PI)))
          ) {
            do
              (ctx1.lineWidth = 1e-4),
                ctx1.beginPath(),
                <!--Change moving circle fill here-->
                showAnim &&
                ctx1.ellipse(
                  (xs1total + xtick1) * w1,
                  (Ypos + deltah1) * h1,
                  y1p * h1 * 0.15,
                  y1p * h1,
                  0,
                  0,
                  2 * Math.PI
                ),
                ctx1.stroke(),
                ctx1.closePath(),
                (ctx1.globalAlpha = alphanum),
                (ctx1.fillStyle = "DeepSkyBlue"),
                ctx1.fill(),
                (ctx1.globalAlpha = 1),
                (ctx1.lineWidth = 0.003 * w1),
                ctx1.beginPath(),
                <!--Change moving circle line-->
                showAnim &&
                ctx1.ellipse(
                  (xs1total + xtick1) * w1,
                  (Ypos + deltah1) * h1,
                  y1p * h1 * 0.15,
                  y1p * h1,
                  0,
                  0.5 * Math.PI,
                  -0.5 * Math.PI
                ),
                ctx1.stroke(),
                ctx1.closePath(),
                (xs1total += xs1);
            while (xs1total + xtick1 <= x1p);
            xs1total + xtick1 >= x1p && (go2 = !0);
          }
          y1p <= Math.sqrt(cvol / (x1p * Math.PI)) &&
            (xtick1 <= x1p &&
              ((ctx1.lineWidth = 1e-4),
              ctx1.beginPath(),
              showAnim &&
              ctx1.ellipse(
                xtick1 * w1,
                (Ypos + deltah1) * h1,
                y1p * h1 * 0.15,
                y1p * h1,
                Math.PI,
                -0.5 * Math.PI,
                -1.5 * Math.PI
              ),
              ctx1.stroke(),
              ctx1.closePath(),
              (ctx1.globalAlpha = alphanum),
              (ctx1.fillStyle = "DeepSkyBlue"),
              ctx1.fill(),
              (ctx1.globalAlpha = 1),
              (ctx1.lineWidth = 0.003 * w1),
              ctx1.beginPath(),
              showAnim &&
              ctx1.ellipse(
                xtick1 * w1,
                (Ypos + deltah1) * h1,
                y1p * h1 * 0.15,
                y1p * h1,
                0,
                0.5 * Math.PI,
                -0.5 * Math.PI
              ),
              ctx1.stroke(),
              ctx1.closePath()),
            (go2 = !0));
        }
        if (!0 == go2) {
          (go1 = !1),
            (go3 = !1),
            (y2 = y1p),
            (xincrement13 = 0),
            (yincrement13 = 0),
            (xs2total = 0);
          do
            xs2total > 0 &&
              ((ctx1.lineWidth = 1e-4 * w1),
              ctx1.beginPath(),
              showAnim &&
              ctx1.ellipse(
                (x1p + xs2total) * w1,
                (Ypos + yincrement13) * h1 + (height1y - Ypos * w1),
                y2 * h1 * 0.14,
                y2 * h1,
                0,
                0,
                2 * Math.PI
              ),
              ctx1.stroke(),
              ctx1.closePath(),
              (ctx1.globalAlpha = alphanum),
              (ctx1.fillStyle = "DeepSkyBlue"),
              ctx1.fill(),
              (ctx1.globalAlpha = 1),
              (ctx1.lineWidth = 0.003 * w1),
              ctx1.beginPath(),
              showAnim &&
              ctx1.ellipse(
                (x1p + xs2total) * w1,
                (Ypos + yincrement13) * h1 + (height1y - Ypos * w1),
                y2 * h1 * 0.14,
                y2 * h1,
                0,
                0.5 * Math.PI,
                -0.5 * Math.PI
              ),
              ctx1.stroke(),
              ctx1.closePath()),
              (pop1 = Math.cbrt(
                y1p ** 3 -
                  (3 * (xincrement13 + xtick2) * (y1p - y2p)) /
                    (Math.PI * (x2p - x1p))
              )),
              (xs2total =
                (3 * (xincrement13 + xtick2)) /
                (Math.PI * (y1p ** 2 + y1p * pop1 + pop1 * pop1))),
              (xincrement13 += cvol),
              (y2 = y1p + ((y2p - y1p) / (x2p - x1p)) * xs2total),
              (yincrement13 =
                ((height3y - height1y) / w1 / (x2p - x1p)) * xs2total),
              xs2total >= x2p - x1p && (go3 = !0);
          while (xs2total <= x2p - x1p);
        }
        if (!0 == go3 && xs2total >= x2p - x1p) {
          if (((go1 = !1), (go2 = !1), (xs3total = 0) + xtick3 <= x3p - x2p))
            do
              (ctx1.lineWidth = 1e-4),
                ctx1.beginPath(),
                showAnim &&
                ctx1.ellipse(
                  (x2p + xs3total + xtick3) * w1,
                  (Ypos + deltah3) * h1,
                  y3p * h1 * 0.13,
                  y3p * h1,
                  0,
                  0,
                  2 * Math.PI
                ),
                ctx1.stroke(),
                ctx1.closePath(),
                (ctx1.globalAlpha = alphanum),
                (ctx1.fillStyle = "DeepSkyBlue"),
                ctx1.fill(),
                (ctx1.globalAlpha = 1),
                (ctx1.lineWidth = 0.003 * w1),
                ctx1.beginPath(),
                showAnim &&
                ctx1.ellipse(
                  (x2p + xs3total + xtick3) * w1,
                  (Ypos + deltah3) * h1,
                  y3p * h1 * 0.13,
                  y3p * h1,
                  0,
                  0.5 * Math.PI,
                  -0.5 * Math.PI
                ),
                ctx1.stroke(),
                ctx1.closePath(),
                (xs3total += xs3);
            while (xs3total + xtick3 <= x3p - x2p);
          xs3total + xtick3 >= x3p - x2p && (go1 = !0);
        }
        !0 == showwidth && showVariables &&
          (xs1 < x1p &&
            (deltah1 <= 0 &&
              ((fontBase = 800),
              (fontSize = 16),
              (ctx1.font = getFont()),
              (ctx1.fillStyle = "black"),
              (ctx1.textAlign = "center"),
              ctx1.fillText(
                toDecimalPrecision(10 * xs1, 4) + " m",
                (x1p / 2) * w1,
                (Ypos + deltah1 - y1p - 0.035) * h1
              ),
              (ctx1.fillStyle = "DeepSkyBlue"),
              (ctx1.strokeStyle = "black"),
              (ctx1.lineWidth = 0.002 * w1),
              ctx1.beginPath(),
              ctx1.moveTo(
                (x1p / 2 - xs1 / 2) * w1,
                (Ypos + deltah1 - y1p) * h1
              ),
              ctx1.lineTo(
                (x1p / 2 - xs1 / 2) * w1,
                (Ypos + deltah1 - y1p - 0.02) * h1
              ),
              ctx1.closePath(),
              ctx1.stroke(),
              ctx1.beginPath(),
              ctx1.moveTo(
                (x1p / 2 + xs1 / 2) * w1,
                (Ypos + deltah1 - y1p) * h1
              ),
              ctx1.lineTo(
                (x1p / 2 + xs1 / 2) * w1,
                (Ypos + deltah1 - y1p - 0.02) * h1
              ),
              ctx1.stroke(),
              (ctx1.strokeStyle = "red"),
              (ctx1.fillStyle = "DeepSkyBlue"),
              xs1 >= 0.04 &&
                (drawArrow(
                  ctx1,
                  (x1p / 2 - xs1 / 2) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  (x1p / 2 + xs1 / 2) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  (x1p / 2 + xs1 / 2) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  (x1p / 2 - xs1 / 2) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                )),
              xs1 < 0.04 &&
                (drawArrow(
                  ctx1,
                  (x1p / 2 - xs1 / 2 - 0.05) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  (x1p / 2 - xs1 / 2) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  (x1p / 2 + xs1 / 2 + 0.05) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  (x1p / 2 + xs1 / 2) * w1,
                  (Ypos + deltah1 - y1p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                ))),
            deltah1 > 0 &&
              ((fontBase = 800),
              (fontSize = 16),
              (ctx1.font = getFont()),
              (ctx1.fillStyle = "black"),
              (ctx1.textAlign = "center"),
              ctx1.fillText(
                toDecimalPrecision(10 * xs1, 4) + " m",
                (x1p / 2) * w1,
                (Ypos + deltah1 + y1p + 0.05) * h1
              ),
              (ctx1.fillStyle = "DeepSkyBlue"),
              (ctx1.strokeStyle = "black"),
              (ctx1.lineWidth = 0.002 * w1),
              ctx1.beginPath(),
              ctx1.moveTo(
                (x1p / 2 - xs1 / 2) * w1,
                (Ypos + deltah1 + y1p) * h1
              ),
              ctx1.lineTo(
                (x1p / 2 - xs1 / 2) * w1,
                (Ypos + deltah1 + y1p + 0.02) * h1
              ),
              ctx1.closePath(),
              ctx1.stroke(),
              ctx1.beginPath(),
              ctx1.moveTo(
                (x1p / 2 + xs1 / 2) * w1,
                (Ypos + deltah1 + y1p) * h1
              ),
              ctx1.lineTo(
                (x1p / 2 + xs1 / 2) * w1,
                (Ypos + deltah1 + y1p + 0.02) * h1
              ),
              ctx1.stroke(),
              (ctx1.strokeStyle = "red"),
              (ctx1.fillStyle = "DeepSkyBlue"),
              xs1 >= 0.04 &&
                (drawArrow(
                  ctx1,
                  (x1p / 2 - xs1 / 2) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  (x1p / 2 + xs1 / 2) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  (x1p / 2 + xs1 / 2) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  (x1p / 2 - xs1 / 2) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                )),
              xs1 < 0.04 &&
                (drawArrow(
                  ctx1,
                  (x1p / 2 - xs1 / 2 - 0.05) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  (x1p / 2 - xs1 / 2) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  (x1p / 2 + xs1 / 2 + 0.05) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  (x1p / 2 + xs1 / 2) * w1,
                  (Ypos + deltah1 + y1p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                )))),
          xs3 < x3p - x2p &&
            ((fontBase = 800),
            (fontSize = 16),
            (ctx1.font = getFont()),
            deltah3 <= 0 &&
              ((ctx1.fillStyle = "black"),
              (ctx1.textAlign = "center"),
              ctx1.fillText(
                toDecimalPrecision(10 * xs3, 4) + " m",
                ((x2p + x3p) / 2) * w1,
                (Ypos + deltah3 - y3p - 0.035) * h1
              ),
              (ctx1.fillStyle = "DeepSkyBlue"),
              (ctx1.strokeStyle = "black"),
              (ctx1.lineWidth = 0.002 * w1),
              ctx1.beginPath(),
              ctx1.moveTo(
                ((x2p + x3p) / 2 - xs3 / 2) * w1,
                (Ypos + deltah3 - y3p) * h1
              ),
              ctx1.lineTo(
                ((x2p + x3p) / 2 - xs3 / 2) * w1,
                (Ypos + deltah3 - y3p - 0.02) * h1
              ),
              ctx1.closePath(),
              ctx1.stroke(),
              ctx1.beginPath(),
              ctx1.moveTo(
                ((x2p + x3p) / 2 + xs3 / 2) * w1,
                (Ypos + deltah3 - y3p) * h1
              ),
              ctx1.lineTo(
                ((x2p + x3p) / 2 + xs3 / 2) * w1,
                (Ypos + deltah3 - y3p - 0.02) * h1
              ),
              ctx1.stroke(),
              (ctx1.strokeStyle = "red"),
              (ctx1.fillStyle = "DeepSkyBlue"),
              xs3 >= 0.04 &&
                (drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 - xs3 / 2) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  ((x2p + x3p) / 2 + xs3 / 2) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 + xs3 / 2) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  ((x2p + x3p) / 2 - xs3 / 2) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                )),
              xs3 < 0.04 &&
                (drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 - xs3 / 2 - 0.05) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  ((x2p + x3p) / 2 - xs3 / 2) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 + xs3 / 2 + 0.05) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  ((x2p + x3p) / 2 + xs3 / 2) * w1,
                  (Ypos + deltah3 - y3p - 0.02) * h1,
                  0.003 * w1,
                  "black"
                ))),
            deltah3 > 0 &&
              ((ctx1.fillStyle = "black"),
              (ctx1.textAlign = "center"),
              (ctx1.textBaseline = "middle"),
              ctx1.fillText(
                toDecimalPrecision(10 * xs3, 4) + " m",
                ((x2p + x3p) / 2) * w1,
                (Ypos + deltah3 + y3p + 0.05) * h1
              ),
              (ctx1.fillStyle = "DeepSkyBlue"),
              (ctx1.strokeStyle = "black"),
              (ctx1.lineWidth = 0.002 * w1),
              ctx1.beginPath(),
              ctx1.moveTo(
                ((x2p + x3p) / 2 - xs3 / 2) * w1,
                (Ypos + deltah3 + y3p) * h1
              ),
              ctx1.lineTo(
                ((x2p + x3p) / 2 - xs3 / 2) * w1,
                (Ypos + deltah3 + y3p + 0.02) * h1
              ),
              ctx1.closePath(),
              ctx1.stroke(),
              ctx1.beginPath(),
              ctx1.moveTo(
                ((x2p + x3p) / 2 + xs3 / 2) * w1,
                (Ypos + deltah3 + y3p) * h1
              ),
              ctx1.lineTo(
                ((x2p + x3p) / 2 + xs3 / 2) * w1,
                (Ypos + deltah3 + y3p + 0.02) * h1
              ),
              ctx1.stroke(),
              (ctx1.strokeStyle = "red"),
              (ctx1.fillStyle = "DeepSkyBlue"),
              xs3 >= 0.04 &&
                (drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 - xs3 / 2) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  ((x2p + x3p) / 2 + xs3 / 2) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 + xs3 / 2) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  ((x2p + x3p) / 2 - xs3 / 2) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                )),
              xs3 < 0.04 &&
                (drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 - xs3 / 2 - 0.05) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  ((x2p + x3p) / 2 - xs3 / 2) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                ),
                drawArrow(
                  ctx1,
                  ((x2p + x3p) / 2 + xs3 / 2 + 0.05) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  ((x2p + x3p) / 2 + xs3 / 2) * w1,
                  (Ypos + deltah3 + y3p + 0.02) * h1,
                  0.003 * w1,
                  "black"
                ))))),
          <!--Black arrow in the middle!-->
          Math.abs(height1y - height3y) > 40 && showVariables &&
            (drawArrow(
              ctx1,
              ((x1p + x2p) * w1) / 2,
              height1y,
              ((x1p + x2p) * w1) / 2,
              height3y,
              0.002 * w1,
              "black"
            ),
            drawArrow(
              ctx1,
              ((x1p + x2p) * w1) / 2,
              height3y,
              ((x1p + x2p) * w1) / 2,
              height1y,
              0.002 * w1,
              "black"
            )),
          height1y - height3y <= 40 && showVariables &&
            height1y - height3y > 0 &&
            (drawArrow(
              ctx1,
              ((x1p + x2p) * w1) / 2,
              height1y + 0.05 * w1,
              ((x1p + x2p) * w1) / 2,
              height1y,
              0.002 * w1,
              "black"
            ),
            drawArrow(
              ctx1,
              ((x1p + x2p) * w1) / 2,
              height3y - 0.05 * w1,
              ((x1p + x2p) * w1) / 2,
              height3y,
              0.002 * w1,
              "black"
            )),
          height1y - height3y > -40 && showVariables &&
            height1y - height3y < 0 &&
            (drawArrow(
              ctx1,
              ((x1p + x2p) * w1) / 2,
              height3y + 0.05 * w1,
              ((x1p + x2p) * w1) / 2,
              height3y,
              0.002 * w1,
              "black"
            ),
            drawArrow(
              ctx1,
              ((x1p + x2p) * w1) / 2,
              height1y - 0.05 * w1,
              ((x1p + x2p) * w1) / 2,
              height1y,
              0.002 * w1,
              "black"
            )),
          (fontBase = 800),
          (fontSize = 18),
          (ctx1.font = getFont()),
          (ctx1.textAlign = "left"),
          (ctx1.fillStyle = "black"),
          (ctx1.textBaseline = "middle"),
          showVariables && 
          ctx1.fillText(
            Math.abs(screenheight3 - screenheight1).toFixed(3) + " m",
            ((x1p + x2p) * w1) / 2 + 0.01 * w1,
            (height1y + height3y) / 2
          ),
          showVariables &&
          (ctx1.strokeStyle = "black"),
          showVariables &&
          ctx1.setLineDash([5, 5]),
          showVariables &&
          ctx1.moveTo((x1p * w1) / 2, height1y),
          showVariables &&
          ctx1.lineTo(((x1p + x2p) * w1) / 2, height1y),
          showVariables &&
          ctx1.stroke(),
          showVariables &&
          ctx1.moveTo(((x2p + x3p) * w1) / 2, height3y),
          showVariables &&
          ctx1.lineTo(((x1p + x2p) * w1) / 2, height3y),
          showVariables &&
          ctx1.stroke(),
          showVariables &&
          ctx1.setLineDash([]),
          (!0 == showradius || !0 == showarea || !0 == showspeed) && showVariables &&
            ((ctx1.strokeStyle = "green"),
            (ctx1.lineWidth = 0.004 * w1),
            ctx1.beginPath(),
            deltah1 <= 0 &&
              (ctx1.moveTo((x1p * w1) / 2, (Ypos + deltah1 + y1p + 0.008) * h1),
              ctx1.lineTo((x1p * w1) / 2, (Ypos + deltah1 + y1p + 0.1) * h1)),
            deltah1 > 0 &&
              (ctx1.moveTo((x1p * w1) / 2, (Ypos + deltah1 - y1p - 0.008) * h1),
              ctx1.lineTo((x1p * w1) / 2, (Ypos + deltah1 - y1p - 0.1) * h1)),
            ctx1.stroke(),
            ctx1.beginPath(),
            deltah3 <= 0 &&
              (ctx1.moveTo(
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y3p + 0.008) * h1
              ),
              ctx1.lineTo(
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y3p + 0.1) * h1
              )),
            deltah3 > 0 &&
              (ctx1.moveTo(
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y3p - 0.008) * h1
              ),
              ctx1.lineTo(
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y3p - 0.1) * h1
              )),
            ctx1.stroke()),
          (fontBase = 800),
          (fontSize = 16),
          (ctx1.font = getFont()),
          (ctx1.fillStyle = "black"),
          (ctx1.textAlign = "center"),
          deltah1 <= 0 && showVariables &&
            ((screenheight1 = 10 * (1 - height1y / h1)),
            (speed1 = (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p)),
            !0 == showradius &&
              ctx1.fillText(
                "Radius = " + toDecimalPrecision(10 * y1p, 4) + " m",
                (x1p * w1) / 2,
                (Ypos + deltah1 + y1p + 0.12) * h1
              ),
            !0 == showarea &&
              ctx1.fillText(
                "Cross-Section Area = " +
                  toDecimalPrecision(Math.PI * y1p * y1p * 100, 4) +
                  " m\xb2",
                (x1p * w1) / 2,
                (Ypos + deltah1 + y1p + 0.14) * h1
              ),
            !0 == showspeed &&
              !1 == slowmo &&
              ctx1.fillText(
                "Speed = v₁ = " +
                  toDecimalPrecision(
                    (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p),
                    4
                  ) +
                  " m/s",
                (x1p * w1) / 2,
                (Ypos + deltah1 + y1p + 0.16) * h1
              ),
            !0 == showspeed &&
              !0 == slowmo &&
              ctx1.fillText(
                "Speed = v₁ = " +
                  toDecimalPrecision(
                    (0.01 * Math.abs(flowrate)) / (Math.PI * y1p * y1p),
                    4
                  ) +
                  " m/s",
                (x1p * w1) / 2,
                (Ypos + deltah1 + y1p + 0.16) * h1
              ),
            !0 == showpressure &&
              ctx1.fillText(
                "Pressure at orange dot = P₁ = " +
                  toDecimalPrecision(pressure1, 4) +
                  " N/m\xb2",
                (x1p * w1) / 2,
                (Ypos + deltah1 + y1p + 0.18) * h1
              ),
            !0 == showheight &&
              ctx1.fillText(
                "Height at orange dot = h₁ = " +
                  screenheight1.toFixed(3) +
                  " m",
                (x1p * w1) / 2,
                (Ypos + deltah1 + y1p + 0.2) * h1
              )),
          deltah1 > 0 && showVariables &&
            ((screenheight1 = 10 * (1 - height1y / h1)),
            (speed1 = (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p)),
            !0 == showradius &&
              ctx1.fillText(
                "Radius = " + toDecimalPrecision(10 * y1p, 4) + " m",
                (x1p * w1) / 2,
                (Ypos + deltah1 - y1p - 0.2) * h1
              ),
            !0 == showarea &&
              ctx1.fillText(
                "Cross-Section Area = " +
                  toDecimalPrecision(Math.PI * y1p * y1p * 100, 4) +
                  " m\xb2",
                (x1p * w1) / 2,
                (Ypos + deltah1 - y1p - 0.18) * h1
              ),
            !0 == showspeed &&
              !1 == slowmo &&
              ctx1.fillText(
                "Speed = v₁ = " +
                  toDecimalPrecision(
                    (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p),
                    4
                  ) +
                  " m/s",
                (x1p * w1) / 2,
                (Ypos + deltah1 - y1p - 0.16) * h1
              ),
            !0 == showspeed &&
              !0 == slowmo &&
              ctx1.fillText(
                "Speed = v₁ = " +
                  toDecimalPrecision(
                    (0.01 * Math.abs(flowrate)) / (Math.PI * y1p * y1p),
                    4
                  ) +
                  " m/s",
                (x1p * w1) / 2,
                (Ypos + deltah1 - y1p - 0.16) * h1
              ),
            !0 == showpressure &&
              ctx1.fillText(
                "Pressure at orange dot = P₁ = " +
                  toDecimalPrecision(pressure1, 4) +
                  " N/m\xb2",
                (x1p * w1) / 2,
                (Ypos + deltah1 - y1p - 0.14) * h1
              ),
            !0 == showheight &&
              ctx1.fillText(
                "Height at orange dot = h₁ = " +
                  screenheight1.toFixed(3) +
                  " m",
                (x1p * w1) / 2,
                (Ypos + deltah1 - y1p - 0.12) * h1
              )),
          deltah3 <= 0 && showVariables &&
            ((screenheight3 = 10 * (1 - height3y / h1)),
            (speed3 = (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p)),
            !0 == showradius &&
              ctx1.fillText(
                "Radius = " + toDecimalPrecision(10 * y3p, 4) + " m",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y2p + 0.12) * h1
              ),
            !0 == showarea &&
              ctx1.fillText(
                "Cross-Section Area = " +
                  toDecimalPrecision(Math.PI * y3p * y3p * 100, 4) +
                  " m\xb2",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y2p + 0.14) * h1
              ),
            !0 == showspeed &&
              !1 == slowmo &&
              ctx1.fillText(
                "Speed = v₂ = " +
                  toDecimalPrecision(
                    (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p),
                    4
                  ) +
                  " m/s",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y2p + 0.16) * h1
              ),
            !0 == showspeed &&
              !0 == slowmo &&
              ctx1.fillText(
                "Speed = v₂ = " +
                  toDecimalPrecision(
                    (0.01 * Math.abs(flowrate)) / (Math.PI * y3p * y3p),
                    4
                  ) +
                  " m/s",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y2p + 0.16) * h1
              ),
            !0 == showpressure &&
              ctx1.fillText(
                "Pressure at orange dot = P₂ = " +
                  (showPressure2 ? toDecimalPrecision(pressure3, 4) : "...") +
                  " N/m\xb2",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y3p + 0.18) * h1
              ),
            !0 == showheight &&
              ctx1.fillText(
                "Height at orange dot = h₂ = " +
                  screenheight3.toFixed(3) +
                  " m",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 + y3p + 0.2) * h1
              )),
          deltah3 > 0 && showVariables &&
            ((screenheight3 = 10 * (1 - height3y / h1)),
            (speed3 = (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p)),
            !0 == showradius &&
              ctx1.fillText(
                "Radius = " + toDecimalPrecision(10 * y3p, 4) + " m",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y2p - 0.2) * h1
              ),
            !0 == showarea &&
              ctx1.fillText(
                "Cross-Section Area = " +
                  toDecimalPrecision(Math.PI * y3p * y3p * 100, 4) +
                  " m\xb2",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y2p - 0.18) * h1
              ),
            !0 == showspeed &&
              !1 == slowmo &&
              ctx1.fillText(
                "Speed = v₂ = " +
                  toDecimalPrecision(
                    (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p),
                    4
                  ) +
                  " m/s",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y2p - 0.16) * h1
              ),
            !0 == showspeed &&
              !0 == slowmo &&
              ctx1.fillText(
                "Speed = v₂ = " +
                  toDecimalPrecision(
                    (0.01 * Math.abs(flowrate)) / (Math.PI * y3p * y3p),
                    4
                  ) +
                  " m/s",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y2p - 0.16) * h1
              ),
            !0 == showpressure &&
              ctx1.fillText(
                "Pressure at orange dot = P₂ = " +
                (showPressure2 ? toDecimalPrecision(pressure3, 4) : "...") +
                  " N/m\xb2",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y3p - 0.14) * h1
              ),
            !0 == showheight &&
              ctx1.fillText(
                "Height at orange dot = h₂ = " +
                  screenheight3.toFixed(3) +
                  " m",
                ((x3p + x2p) * w1) / 2,
                (Ypos + deltah3 - y3p - 0.12) * h1
              )),
          calcdeltapressure();
      }
      function drawTheSim() {
        ctx1.clearRect(0, 0, w1, h1),
          ctx1.closePath(),
          !1 == showinfo &&
            ((document.getElementById("infocontainerid").style.display =
              "none"),
            (document.getElementById("mainCanvas").style.zIndex = "+1"),
            (document.getElementById("mainCanvas").style.display = "inline")),
          !0 == showinfo &&
            ((document.getElementById("infocontainerid").style.display =
              "inline"),
            (document.getElementById("mainCanvas").style.zIndex = "-1"),
            (document.getElementById("mainCanvas").style.display = "none")),
          (ctx1.lineWidth = 0.003 * w1),
          (ctx1.strokeStyle = "black"),
          ctx1.beginPath(),
          ctx1.rect(0, 0, w1, h1),
          ctx1.stroke(),
          ctx1.closePath(),
          (ctx1.lineWidth = 0.005 * w1),
          ctx1.beginPath(),
          ctx1.moveTo(0, h1 * (Ypos - y1p + deltah1)),
          ctx1.lineTo(w1 * x1p, h1 * (Ypos - y1p + deltah1)),
          ctx1.lineTo(w1 * x2p, h1 * (Ypos - y2p + deltah3)),
          ctx1.lineTo(w1 * x3p, h1 * (Ypos - y3p + deltah3)),
          ctx1.stroke(),
          ctx1.beginPath(),
          ctx1.moveTo(0, h1 * (Ypos + y1p + deltah1)),
          ctx1.lineTo(w1 * x1p, h1 * (Ypos + y1p + deltah1)),
          ctx1.lineTo(w1 * x2p, h1 * (Ypos + y2p + deltah3)),
          ctx1.lineTo(w1 * x3p, h1 * (Ypos + y3p + deltah3)),
          ctx1.stroke(),
          ctx1.closePath(),
          ctx1.beginPath(),
          (ctx1.globalAlpha = alphanum / 2),
          (ctx1.fillStyle = "DeepSkyBlue"),
          ctx1.fillRect(
            0 * w1,
            (Ypos - y1p + deltah1) * h1,
            x1p * w1,
            2 * y1p * h1
          ),
          ctx1.fill(),
          (ctx1.globalAlpha = 1),
          (ctx1.globalAlpha = alphanum / 2),
          (ctx1.fillStyle = "DeepSkyBlue");
        let e = new Path2D();
        e.moveTo(x1p * w1, (Ypos - y1p + deltah1) * h1),
          e.lineTo(x2p * w1, (Ypos - y2p + deltah3) * h1),
          e.lineTo(x2p * w1, (Ypos + y2p + deltah3) * h1),
          e.lineTo(x1p * w1, (Ypos + y1p + deltah1) * h1),
          e.lineTo(x1p * w1, (Ypos - y1p + deltah1) * h1),
          e.closePath(),
          (ctx1.fillStyle = "DeepSkyBlue"),
          ctx1.fill(e, "evenodd"),
          (ctx1.globalAlpha = 1),
          ctx1.beginPath(),
          (ctx1.globalAlpha = alphanum / 2),
          (ctx1.fillStyle = "DeepSkyBlue"),
          ctx1.fillRect(
            x2p * w1,
            (Ypos - y3p + deltah3) * h1,
            (x3p - x2p) * w1,
            2 * y3p * h1
          ),
          ctx1.fill(),
          (ctx1.globalAlpha = 1),
          (xs1 = cvol / (Math.PI * y1p * y1p)),
          (xs3 = cvol / (Math.PI * y3p * y3p)),
          firstchunk(),
          (ctx1.globalAlpha = 1),
          ctx1.beginPath(),
          (ctx1.lineWidth = alphanum / 2),
          (ctx1.strokeStyle = "black"),
          (ctx1.fillStyle = "lightgreen"),
          ctx1.ellipse(
            axpos,
            aypos + deltah1 * w1,
            0.02 * w1,
            0.02 * w1,
            0,
            0,
            2 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.fill(),
          ctx1.beginPath(),
          ctx1.ellipse(
            bxpos,
            bypos + deltah3 * w1,
            0.02 * w1,
            0.02 * w1,
            0,
            0,
            2 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.fill(),
          (ctx1.fillStyle = "orange"),
          ctx1.beginPath(),
          ctx1.ellipse(
            height1x,
            height1y,
            0.02 * w1,
            0.02 * w1,
            0,
            0,
            2 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.fill(),
          ctx1.beginPath(),
          ctx1.ellipse(
            height3x,
            height3y,
            0.02 * w1,
            0.02 * w1,
            0,
            0,
            2 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.fill(),
          (fontBase = 1600),
          (fontSize = 40),
          (ctx1.font = getFont()),
          (ctx1.fillStyle = "black"),
          (ctx1.textAlign = "center"),
          (ctx1.textBaseline = "middle"),
          ctx1.fillText("1", height1x, height1y),
          ctx1.fillText("2", height3x, height3y),
          !1 == leftgreendangletouched &&
            ((fontBase = 1600),
            (fontSize = 40),
            (ctx1.font = getFont()),
            (ctx1.fillStyle = "red"),
            (ctx1.textAlign = "center"),
            ctx1.fillText("Drag me!", axpos, aypos + deltah1 * w1 + 0.04 * h1),
            (fontBase = 1600),
            (fontSize = 30),
            (ctx1.font = getFont()),
            ctx1.fillText(
              "Changes radius and length of this pipe.",
              axpos,
              aypos + deltah1 * w1 + 0.065 * h1
            )),
          !1 == leftorangedangletouched &&
            ((fontBase = 1600),
            (fontSize = 40),
            (ctx1.font = getFont()),
            (ctx1.fillStyle = "red"),
            (ctx1.textAlign = "center"),
            ctx1.fillText("Drag me!", height1x, height1y + 0.04 * h1),
            (fontBase = 1600),
            (fontSize = 30),
            (ctx1.font = getFont()),
            ctx1.fillText(
              "Changes elevation of this pipe.",
              height1x,
              height1y + 0.065 * h1
            )),
          (ctx1.strokeStyle = "black"),
          (ctx1.lineWidth = 0.005 * w1),
          ctx1.beginPath(),
          ctx1.ellipse(
            x1p * w1,
            (Ypos + deltah1) * h1,
            y1p * h1 * 0.15,
            y1p * h1,
            0,
            0.5 * Math.PI,
            -0.5 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.closePath(),
          (ctx1.lineWidth = 0.0015 * w1),
          ctx1.setLineDash([5, 5]),
          ctx1.beginPath(),
          ctx1.ellipse(
            x1p * w1,
            (Ypos + deltah1) * h1,
            y1p * h1 * 0.15,
            y1p * h1,
            0,
            -0.5 * Math.PI,
            0.5 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.closePath(),
          ctx1.setLineDash([]),
          (ctx1.lineWidth = 0.005 * w1),
          ctx1.beginPath(),
          ctx1.ellipse(
            x2p * w1,
            (Ypos + deltah3) * h1,
            y2p * h1 * 0.14,
            y2p * h1,
            0,
            0.5 * Math.PI,
            -0.5 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.closePath(),
          (ctx1.lineWidth = 0.0015 * w1),
          ctx1.setLineDash([5, 5]),
          ctx1.beginPath(),
          ctx1.ellipse(
            x2p * w1,
            (Ypos + deltah3) * h1,
            y2p * h1 * 0.14,
            y2p * h1,
            0,
            -0.5 * Math.PI,
            0.5 * Math.PI
          ),
          ctx1.stroke(),
          ctx1.closePath(),
          ctx1.setLineDash([]),
          (fontBase = 800),
          (fontSize = 26),
          (ctx1.font = "bold " + getFont()),
          (ctx1.fillStyle = "darkblue"),
          (ctx1.textAlign = "center"),
          (ctx1.textBaseline = "top"),
          (ctx1.fillStyle = "orangered"),
          showEquation &&
          ctx1.fillText(
            "P₁  +   ρgh₁   +   \xbdρv₁\xb2  =  P₂   +   ρgh₂  +   \xbdρv₂\xb2 ",
            w1 / 2,
            0.01 * h1
          ),
          (ke1 = toDecimalPrecision(0.5 * density * speed1 * speed1, 4)),
          (pe1 = toDecimalPrecision(density * grav * screenheight1, 4)),
          (ke3 = toDecimalPrecision(0.5 * density * speed3 * speed3, 4)),
          (pe3 = toDecimalPrecision(density * grav * screenheight3, 4)),
          (ctx1.fillStyle = "black"),
          (fontBase = 800),
          (fontSize = 18),
          (ctx1.font = getFont()),
          !0 == showEquationInfo &&
          ctx1.fillText(
            toDecimalPrecision(pressure1, 4) +
              " N/m\xb2 + " +
              pe1 +
              " kg/(ms\xb2) + " +
              ke1 +
              " kg/(ms\xb2)  = " +
              (showPressure2 ? toDecimalPrecision(pressure3, 4) : "...") +
              " N/m\xb2 + " +
              pe3 +
              " kg/(ms\xb2) + " +
              ke3 +
              " kg/(ms\xb2)",
            w1 / 2,
            0.05 * h1
          ),
          !0 == showEquationInfo &&
          ctx1.fillText(
            toDecimalPrecision(pressure1, 4) +
              " J/m\xb3 + " +
              pe1 +
              " J/m\xb3 + " +
              ke1 +
              " J/m\xb3 = " +
              (showPressure2 ? toDecimalPrecision(pressure3, 4): "...") +
              " J/m\xb3 + " +
              pe3 +
              " J/m\xb3 + " +
              ke3 +
              " J/m\xb3",
            w1 / 2,
            0.08 * h1
          ),
          htmltextchange();
      }
      function noinfo() {
        (document.getElementById("infocontainerid").style.zIndex = "-1"),
          (document.getElementById("mainCanvas").style.zIndex = "+1"),
          (document.getElementById("mainCanvas").style.display = "inline"),
          (showinfo = !1);
      }
      function draw() {
        (ctx1.canvas.width = window.innerHeight),
          (ctx1.canvas.height = window.innerHeight),
          (w1 = canvas1.width),
          (h1 = canvas1.height),
          window.innerHeight / window.innerWidth > 0.67 &&
            ((ctx1.canvas.width = 0.68 * window.innerWidth),
            (ctx1.canvas.height = 0.68 * window.innerWidth),
            (w1 = canvas1.width),
            (h1 = canvas1.height));
      }
      function updateAnimation() {
        drawTheSim();
      }
      function frame() {
        updateAnimation(), requestAnimationFrame(frame);
      }
      canvas1.addEventListener("mousedown", mouseDown, !1),
        canvas1.addEventListener("mousemove", mouseXY, !1),
        canvas1.addEventListener("touchstart", touchDown, !1),
        canvas1.addEventListener("touchmove", touchXY, !0),
        canvas1.addEventListener("touchend", touchUp, !1),
        ctx1.canvas.addEventListener("click", (e) => {
          (amousedownongraph = !1),
            (bmousedownongraph = !1),
            (height1mousedownongraph = !1),
            (height3mousedownongraph = !1);
        }),
        (document.getElementById("stopButton").style.background = "green"),
        (document.getElementById("resetButton").style.background = "blue"),
        (document.getElementById("slowButton").style.background = "orange"),
        (document.getElementById("infoButton").style.background = "lightgreen"),
        (document.getElementById("infoButton").style.color = "magenta"),
        document.querySelector("#p1id").addEventListener("click", p1clicked),
        document.querySelector("#p2id").addEventListener("click", p2clicked),
        (window.onresize = function () {
          (ctx1.canvas.width = window.innerHeight),
            (ctx1.canvas.height = window.innerHeight),
            (w1 = canvas1.width),
            (h1 = canvas1.height),
            window.innerHeight / window.innerWidth > 0.67 &&
              ((ctx1.canvas.width = 0.68 * window.innerWidth),
              (ctx1.canvas.height = 0.68 * window.innerWidth),
              (w1 = canvas1.width),
              (h1 = canvas1.height)),
            (document.getElementById("smallbuttonsid").style.width =
              0.68 * window.innerWidth),
            (y2 = y1p),
            (height1x = (x1p / 2) * w1),
            (height1y = (Ypos + 0.2) * w1),
            (height3x = ((x2p + 1) / 2) * w1),
            (height3y = (Ypos - 0.05) * w1),
            (deltah1 = 0.2),
            (deltah3 = -0.05),
            (density = 1e3),
            (grav = 10),
            (axpos = x1p * w1),
            (aypos = (Ypos + y1p) * w1),
            (bxpos = x2p * w1),
            (bypos = (Ypos + y2p) * w1),
            (cxpos = x3p * w1),
            (cypos = (Ypos + y3p) * w1),
            reset();
        }),
        (document.getElementById("infoButton").onmousedown = function () {
          showainfoclicked();
        }),
        (document.getElementById("slowButton").onmousedown = function () {
          (document.getElementById("stopButton").style.background = "green"),
            (stop = !1),
            !1 == (slowmo = !slowmo) &&
              ((tickrate = 0.01),
              (stop = !1),
              (document.getElementById("slowButton").style.background =
                "green")),
            !0 == slowmo &&
              ((tickrate = 0.0015),
              (document.getElementById("slowButton").style.background =
                "orange"));
        }),
        (document.getElementById("stopButton").onmousedown = function () {
          !1 == (stop = !stop) &&
            !1 == slowmo &&
            ((tickrate = 0.01),
            (document.getElementById("stopButton").style.background = "green")),
            !1 == stop &&
              !0 == slowmo &&
              ((tickrate = 0.0015),
              (document.getElementById("stopButton").style.background =
                "green")),
            !0 == stop &&
              ((tickrate = 0),
              (document.getElementById("stopButton").style.background =
                "orange"));
        }),
        (document.getElementById("resetButton").onmousedown = function () {
          (document.getElementById("slowButton").style.background = "green"),
            (document.getElementById("stopButton").style.background = "green"),
            (flowrate = 1),
            (leftgreendangletouched = !1),
            (leftorangedangletouched = !1),
            (tickrate = 0.01),
            (pop1 = 0),
            (go1 = !0),
            (go2 = !1),
            (go3 = !1),
            (stop = !1),
            (slowmo = !0),
            (tickrate = 0.01),
            (y2 = y1p),
            (Ypos = 0.45),
            (y1p = 0.075),
            (x2p = 0.5),
            (y2p = 0.075),
            (x3p = 1.1),
            (y3p = 0.075),
            (axpos = (x1p = 0.3) * w1),
            (aypos = (Ypos + y1p) * w1),
            (bxpos = x2p * w1),
            (bypos = (Ypos + y2p) * w1),
            (cxpos = x3p * w1),
            (cypos = (Ypos + y3p) * w1),
            (cvol = 0.002),
            (height1x = (x1p / 2) * w1),
            (height1y = (Ypos - 0.05) * w1),
            (height3x = ((x2p + 1) / 2) * w1),
            (height3y = (Ypos - 0.05) * w1),
            (deltah1 = -0.05),
            (deltah3 = -0.05),
            (density = 1e3),
            (grav = 10),
            (screenheight1 = 10 * (1 - height1y / h1)),
            (screenheight3 = 10 * (1 - height3y / h1)),
            (speed1 = (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p)),
            (speed3 = (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p)),
            (document.getElementById("cvolRange").value = 0.002),
            (document.getElementById("rateRange").value = 1),
            (document.getElementById("densityRange").value = 1e3),
            (document.getElementById("gravRange").value = 10),
            (pressure1 = 1e5),
            (document.getElementById("p1Range").value = 1e5),
            (document.getElementById("p3Range").value = 1e5),
            p1clicked(),
            document.getElementById("p1id").click(),
            htmltextchange(),
            calcdeltapressure(),
            (leftgreendangletouched = !1),
            (leftorangedangletouched = !1),
            (showinfo = !1),
            (document.getElementById("infocontainerid").style.display = "none"),
            (document.getElementById("mainCanvas").style.zIndex = "+1"),
            (document.getElementById("mainCanvas").style.display = "inline");
        }),
        (grav = 10),
        draw(),
        (document.getElementById("infoButton").style.background = "lightgreen"),
        (document.getElementById("infoButton").style.color = "magenta"),
        (Ypos = 0.45),
        (y1p = 0.075),
        (x2p = 0.5),
        (y2p = 0.075),
        (x3p = 1.1),
        (y3p = 0.075),
        (axpos = (x1p = 0.3) * w1),
        (aypos = (Ypos + y1p) * w1),
        (bxpos = x2p * w1),
        (bypos = (Ypos + y2p) * w1),
        (cxpos = x3p * w1),
        (cypos = (Ypos + y3p) * w1),
        (p1selected = !0),
        (p3selected = !1),
        (pressure1 = 1e5),
        (cvol = 0.002),
        (height1x = (x1p / 2) * w1),
        (height1y = (Ypos - 0.05) * w1),
        (height3x = ((x2p + 1) / 2) * w1),
        (height3y = (Ypos - 0.05) * w1),
        (deltah1 = -0.05),
        (deltah3 = -0.05),
        (alphanum = (density = 1e3) / 3e3),
        (grav = 10),
        (screenheight1 = 10 * (1 - height1y / h1)),
        (screenheight3 = 10 * (1 - height3y / h1)),
        (speed1 = (0.1 * Math.abs(flowrate)) / (Math.PI * y1p * y1p)),
        (speed3 = (0.1 * Math.abs(flowrate)) / (Math.PI * y3p * y3p)),
        calcdeltapressure(),
        requestAnimationFrame(frame);
    </script>
  </body>
</html>
